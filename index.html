<!DOCTYPE html>
<html>
<head>
<title>ScratchX Extension Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
<base href='file:\\\F:\University Work\Scholarship\'/>
</head>
<body>
<h2>ScratchX Extension Documentation</h2>
<p>ScratchX is a web based GUI that offers easy to use programming blocks that make it ideal in a classroom setting for the teaching of programming. Unlike its Scratch counterpart, ScratchX supports experimental extensions, which allows users to load their own extensions into the GUI. These extensions are written in JavaScript and can be loaded into the GUI by inserting a Github hosted JavaScript link (e.g. <a href="http://leedsrobotics.github.io/practiseblocks.js">http://leedsrobotics.github.io/practiseblocks.js</a>) into the home page of the ScratchX site (<a href="http://scratchx.org">http://scratchx.org</a>).</p>
<h4>Platform Compatibility</h4>
<p>Since the ScratchX GUI is web based, it can be accessed via any computer and operating system with an internet connection and a recent version of Adobe Flash installed. However, in order to interface with hardware, a hardware plugin must be downloaded from:</p>
<p><a href="https://scratch.mit.edu/info/ext_download/">https://scratch.mit.edu/info/ext_download/</a></p>
<p>This hardware plugin is NOT available on Linux. The official plugins are currently only available for download on Windows and Mac.</p>
<h4>Browser Compatibility</h4>
<p>Though the plugin is available on multiple browsers, Mozilla Firefox is recommended as it comes with the least issues, especially when it comes to getting the hardware plugin to be detected. Before starting the extensions, you should disable the cache beforehand as Firefox repeatedly caches versions of the JavaScript files hosted on the site. This can be done by following these steps:</p>
<ul>
<li>type in the address bar about:config </li>
<li>then press the button i'l be careful i promise </li>
<li>then type in the bar browser.cache.disk.enable </li>
<li>then double click on it, to make it false </li>
<li>exit firefox and restart-it. </li>
<li>do the same with browser.cache.memory.enable </li>
</ul>
<p>Alternatively, you can hit (<code>Ctrl + F5</code>) to update the cache with a new version of the page.</p>
<h4>Tutorials</h4>
<p>The ScratchX wiki page is particularly useful for learning how to extend Scratch:</p>
<p><a href="https://github.com/LLK/scratchx/wiki">https://github.com/LLK/scratchx/wiki</a></p>
<p>It covers how to create various block types and how to setup the Github page in order to host JavaScript files that can be loaded into ScratchX. It also briefly covers to how to ScratchX supports USB and serial hardware. 
In addition, examples of other extensions can be found here:</p>
<p><a href="https://github.com/LLK/scratchx/wiki/Example-Extensions">https://github.com/LLK/scratchx/wiki/Example-Extensions</a></p>
<h4>Serial Support</h4>
<p>If the examples for serial support on the ScratchX wiki don’t work, here is an example of a barebones serial extension that connects to the first available serial device, printing out data it receives:</p>
<pre><code>(function(ext) 
    {
    var device; // Declares undefined device
    var dataView = null; // View to contain received data


    /**
     * Return status of the extension
     */
    ext._getStatus = function() 
    {
        return {status:2, msg: 'Ready'};
    };


    /**
     * Checks if newly connected devices are viable (runs whenever new device is connected)
     */
    var potentialDevices = [];
    ext._deviceConnected = function(dev) {
    potentialDevices.push(dev); // Add new device to the list of potential devices

        // If no device is currently set, try another device
    if (!device) {
    tryNextDevice();
    }
    }


    /**
     * Checks if a compatible device is connected, opening a connection if it is and specifies data received
     * should be printed in a readable format
     */
    function tryNextDevice() 
    {
        device = potentialDevices.shift(); // Set device to the next available device
    if (!device) return; // If there was no device available, return

    device.open({ stopBits: 0, bitRate: 9600, ctsFlowControl: 0 }); // Opens connection

    // When data is received from device, convert the data to a readable format and print to console
    device.set_receive_handler(function(data) {
        dataView = new Uint8Array(data);
        for(var x = 0; x &lt; dataView.length; x++)
        {
            console.log(String.fromCharCode(dataView[x]));  
        }
    });
    };


    /**
     * Processes that run on extension shutdown
     */
    ext._shutdown = function(){};


    // Registers block types, names and corresponding procedures
    var descriptor = {
        blocks: []
    };


    var serial_info = {type: 'serial'}; // Declare type of hardware required

    ScratchExtensions.register('Extension Name', descriptor, ext, serial_info); // Registers the extension
})({});
</code></pre>

<p>Data sent to a serial device in this way must be stored in an ArrayBuffer.  However, it must be contained within a TypedArray, such as the Uint8Array for unsigned 8-bit integers seen above. A list of available TypedArrays can be found here:</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays</a></p>
<p>The data can then be sent by getting the ‘buffer’ attribute of the TypedArray object inside the parameters of the send method of the device object (e.g.  <code>device.send(yourTypedArray.buffer);</code>  ).
Here is an example of a function that sends the command “@id” to a connected device:</p>
<pre><code>ext.idRequest = function()
{
  var commandLeft = &quot;@id&quot;; // Request ID command definition
  var view = new Uint8Array(3); // View to contain the command being sent

  // Fill view with the commands individual bytes
  for(var x = 0; x &lt; commandLeft.length; x++)
  {
    view[x] = commandLeft.charCodeAt(x);
  }

  device.send(view.buffer); // Send command
}
</code></pre>

<h4>Useful Code</h4>
<pre><code>device.open({ stopBits: 0, bitRate: 9600, ctsFlowControl: 0 });
</code></pre>

<p>‘.open’ is called on serialDevice objects and opens a connection with a device. Default values for each field can be found on the wiki page.</p>
<pre><code>device.set_receive_handler(function(data) { 
  // Insert code here 
});
</code></pre>

<p>‘.set<em>receive</em>handler’ is called on serialDevice objects and accepts a function as its parameter. After this method runs, whenever data is received from the serial device, the specified function will run to handle the data. The function definition must accept a single parameter, which will contain the raw data (stored in a ArrayBuffer) that the device sends back.</p>
<pre><code>console.log(device.constructor.name);
</code></pre>

<p>Use ‘.constructor.name’ on a device object to check that it is indeed a serialDevice object.</p>

<br/>
<hr/>
<br/>
<h4>More Examples</h4>
<p><a href="http://leedsrobotics.github.io/practiseblocks.js"><strong>Download practiseblocks.js</strong></a></p>
<p><a href="http://leedsrobotics.github.io/usbblocks.js"><strong>Download usbblocks.js</strong></a></p>
<p><a href="http://leedsrobotics.github.io/serialblocks.js"><strong>Download serialblocks.js</strong></a></p>
<p><a href="http://leedsrobotics.github.io/controllerblock.js"><strong>Download controllerblock.js</strong></a></p>
<p><a href="http://leedsrobotics.github.io/traceycontroller.js"><strong>Download traceycontroller.js</strong></a></p>
                        

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
